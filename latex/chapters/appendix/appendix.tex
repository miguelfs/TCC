\chapter{otimização dos hiperparâmetros}

\section{\textit{next-item}}
\subsubsection{skNN e vskNN}
Em que $k$ é a quantidade de vizinhos os quais a pontuação dos itens é
calculada, $N$ é o tamanho da amostra de sessões utilizadas para calcular os
vizinhos mais próximos, $Sim$ é a função de similaridade, $W_{atual}$ é a função
de decaimento que determina peso das ações individuais na sessão atual,
$W_{candidato}$ é a função de decaimento que determina o peso dos itens
candidatos de uma sessão vizinha e selecionados por itens clicados menos
recentemente na sessão atual e $IDF$ é o peso associado à frequência inversa do
documento (\textit{Inverse Document Frequency}).

\begin{table}[htbp]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|}
      \hline
      \multicolumn{3}{|c|}{Parâmetos} & \multicolumn{4}{c|}{Métricas @10} \\
      \hline
      k & N & Sim & MRR & HR & Cov & Pop\\
      \hline
      50 & 500 & Cosseno & \textbf{0.172} & 0.571 & \textbf{0.645} & \textbf{0.204} \\
      \hline
      50 & 500 & Jaccard & 0.165 & 0.534 & 0.534 & 0.289 \\
      \hline
      1000 & 500 & Jaccard & 0.166 & 0.534 & 0.534 & 0.279 \\
      \hline
      1500 & 500 & Cosseno & 0.160 & 0.511 & 0.529 & 0.283 \\
    %   \hline
    %   50 & 10000 & Jaccard & \textbf{0.176} & \textbf{0.587} & \textbf{0.700} & 0.210 \\
      \hline
      100 & 2500 & Cosseno & \textbf{0.172} & \textbf{0.577} & 0.611 & 0.232 \\
      \hline
    \end{tabular}
    \caption{\textit{session-based} kNN (sKNN)}
  \end{table}

%   vsknn-k=1500-sample_size=2500-weighting=same-weighting_score=div-idf_weighting=10
% vsknn-k=1500-sample_size=500-weighting=quadratic-weighting_score=log-idf_weighting=False
% vsknn-k=1500-sample_size=500-weighting=same-weighting_score=linear-idf_weighting=10
% mrr10 0.1462788940342183 0.15546196009033428 0.14208841138517056
% hr10 0.5071205750712058 0.4885392648853926 0.48528414485284144
% cov10 0.5794019933554817 0.5242524916943522 0.574750830564784
% pop10 0.24168610581871308 0.28216181416939157 0.21287151000442397

\begin{table}[htbp]
\centering
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{5}{|c|}{Parâmetos} & \multicolumn{4}{c|}{Métricas @10} \\
    \hline
    k & N & $W_{atual}$ & $W_{candidato}$ & IDF & MRR & HR & Cov & Pop \\
    \hline
    50 & 500 & Linear & log & 5 & 0.156 & 0.522  & 0.638 & \textbf{0.183} \\
    \hline
    50 & 2500 & Quadrático & Div & 1 & 0.157 & 0.532 & 0.653 & 0.200 \\
    \hline
    50 & 2500 & N/A & Log & 1 & \textbf{0.160} & \textbf{0.557} & \textbf{0.657} & 0.200 \\
    \hline
    1500 & 2500 & N/A & Div & 10 & 0.146 & 0.507 & 0.580 & 0.242 \\
    \hline
    1500 & 500 & Quadrático & Log & N/A & 0.142 & 0.489 & 0.524 & 0.282 \\
    \hline
    1500 & 500 & N/A & Linear & 10 & 0.142 & 0.485 & 0.575 & 0.213 \\
    \hline
  \end{tabular}
  \caption{\textit{Vector multiplication session-based kNN} (vsKNN)}
\end{table}

\subsubsection{Regras de sequência}
em que as métricas são a quantidade de passos e a função de pesos.
\begin{table}[htbp]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|}
        \hline
        \multicolumn{2}{|c|}{Parâmetros} & \multicolumn{4}{c|}{Métricas} \\
        \hline
        Passos & W & MRR@10 & HR@10 & Cov@10 & Pop@10 \\
        \hline
        6 & Div & 0.264 & \textbf{0.533} & 0.502 & 0.286 \\
        \hline
        6 & Log & 0.255 & 0.519 & 0.490 & 0.293 \\
        \hline
        6 & Quadrático & \textbf{0.270} & \textbf{0.533} & 0.516 & 0.275 \\
        \hline
        11 & Div & 0.264 & 0.532 & 0.503 & 0.287 \\
        \hline
        11 & Linear & 0.253 & 0.519 & 0.488 & 0.293 \\
        \hline
        11 & Log & 0.254 & 0.516 & 0.490 & \textbf{0.296} \\
        \hline
        12 & Quadrático & \textbf{0.270} & \textbf{0.533} & \textbf{0.517} & 0.275 \\
        \hline
        \end{tabular}
    \caption{Regras de sequência}
\end{table}


\subsubsection{stan}

% stan-k=200-sample_size=1000-lambda_spw=7.24-lambda_snh=2.5-lambda_inh=7.24	0.20067973323676755		0.5798479087452472 	0.23122923588039868	0.23623805893933736
% stan-k=200-sample_size=2500-lambda_spw=7.24-lambda_snh=100-lambda_inh=1.81	0.18985077554469207		0.6368821292775665 	0.2378737541528239	0.21672305145860155
% stan-k=500-sample_size=1000-lambda_spw=7.24-lambda_snh=80-lambda_inh=0.905	0.1881133441969945		0.6596958174904943 	0.22591362126245848	0.23515923118256993
% stan-k=100-sample_size=5000-lambda_spw=1e-05-lambda_snh=100-lambda_inh=1.81	0.17376425855513317		0.5228136882129277	 	0.26777408637873756	0.18852283584073387
% stan-k=100-sample_size=2500-lambda_spw=1.81-lambda_snh=40-lambda_inh=3.62	0.19688801376063736	  	0.6273764258555133	 	0.24451827242524918	0.20225671704187742


\begin{table}[htbp]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
      \hline
      \multicolumn{5}{|c|}{Parâmetos} & \multicolumn{4}{c|}{Métricas @10} \\
      \hline
      k & N & $\lambda_{\text{spw}}$ & $\lambda_{\text{snh}}$ & $\lambda_{\text{inh}}$ & MRR & HR & Cov & Pop \\
      \hline
      2000 & 2500 & 3,62 & 100 & 7,24 & \textbf{0,202} & \textbf{0,637} & 0,217 & 0,277 \\
      \hline
      200 & 1000 & 7,24 & 2,5 & 7,24 & 0,201 & 0,580 & 0,231 & 0,236 \\
      \hline
      200 & 2500 & 7,24 & 100 & 1,81& 0,190 & \textbf{0,637} & 0,238 & 0,217 \\
      \hline
      500 & 1000 & 7,24 & 80 & 0,905 & 0,188 & 0,660 & 0,226 & 0,235 \\
      \hline
      100 & 5000 & $10^{-5}$ & 100 & 1,81 & 0,174 & 0,523 & \textbf{0,268} & \textbf{0,189} \\
      \hline
      100 & 2500 & 1,81 & 40 & 3,62 & 0,197 & 0,627 & 0,245 & 0,202 \\
      \hline

    \end{tabular}
    \caption{stan}
  \end{table}


\subsubsection{vstan}
\begin{table}[htbp]
    \centering
    \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|}
      \hline
      \multicolumn{8}{|c|}{Parâmetos} & \multicolumn{4}{c|}{Métricas @10} \\
      \hline
      k & N & Sim & $\lambda_{\text{spw}}$ & $\lambda_{\text{snh}}$ & $\lambda_{\text{inh}}$ & $\lambda_{\text{ipw}}$ & $\lambda_{\text{IDF}}$ & MRR & HR & Cov & Pop \\
      \hline
      1500 & 1000 & Cosseno & 10 & 5 & 10 & 5 & False & 0,198 & 0,439 & 0,601 & 0,237 \\
      \hline
      1000 & 5000 & Cosseno & 10 & 40 & 5 & $10^{-5}$ & False & \textbf{0,202} & \textbf{0,473} & 0,629 & 0,238 \\
      \hline
      100 & 10000 & Cosseno & 2,5 & 100 & 2,5 & 2,5 & False & 0,194 & 0,456 & 0,629 & 0,196 \\
      \hline
      2000 & 1000 & Vetorial & 10 & 100 & 0,625 & 1,25 & False & 0,187 & 0,447 & \textbf{0,644} & 0,252 \\
      \hline
      1500 & 1000 & Vetorial & 5 & 100 & 5 & 5 & False & 0,187 & 0,445 & 0,639 & 0,213 \\
      \hline
      1000 & 10000 & Vetorial & $10^{-5}$ & 10 & 10 & 5 & 1 & 0,180 & 0,422 & 0,542 & \textbf{0,173} \\
      \hline
    \end{tabular}
  \end{table}

\subsubsection{smf}
$smf_{1}$ é o modelo com função objetiva BPR e skip igual a 0,2.
\begin{table}
  \centering
  \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|}
    \hline
      \multicolumn{6}{|c|}{Parâmetos} & \multicolumn{4}{c|}{Métricas @10} \\
      \hline
      Obj. & at. & d. & skip & m & l.r. & MRR & HR & Cov & Pop \\
      \hline
      BPR & Linear & 0,3 & 0,2 & 0 & 0,01 & \textbf{0,359} & 0,614 & 0,183 & 0,269 \\
      \hline
      BPR & Linear & 0,3 & 0 & 0 & 0,01 & 0,358 & 0,610 & 0,191 & 0,267 \\
      \hline
      TOP1 & Linear & 0,1 & 0,3 & 0,1 & 0,05 & 0,344 & \textbf{0,654} & 0,282 & 0,236 \\
      \hline
      TOP1 & Linear & 0 & 0,3 & 0,8 & 0,004 & 0,350 & 0,644 & 0,196 & 0,273 \\
      \hline
      BPR & Linear & 0,3 & 0 & 0 & 0,07 & 0,319 & 0,627 & \textbf{0,306} & \textbf{0,231} \\
      \hline
      \end{tabular}
\end{table}


\section{\textit{windowed}, \textit{next-item}}

